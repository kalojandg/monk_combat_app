<!DOCTYPE html>
<html lang="bg">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Monk Sheet Lite ‚Äî v3</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icons/icon-192.png" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />
  <meta name="theme-color" content="#0b0c12" />
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="wrap">
    <div class="header">
      <div class="title">Monk Sheet Deluxe Ultra Pro Max+</div>
      <div class="spacer"></div>
      <div id="lifeStatus" class="status-emoji">üôÇ</div>
      <div class="controls mt8">
        <button id="btnShortRest">Short rest</button>
        <button id="btnLongRest" class="primary">Long rest</button>
        <button id="btnExport">Export</button>
        <label class="tab-btn" for="importFile" style="cursor:pointer">Import</label>
        <input id="importFile" type="file" accept="application/json" style="display:none" />
        <!-- <button id="btnReset" class="danger">Reset</button> -->
        <button id="btnCloudLink" class="pill">Cloud</button>
        <button id="btnCloudPull" class="pill ghost">Pull</button>
        <span id="cloudDot" class="dot" title="Not linked"></span>
      </div>
    </div>

    <div>
      <div class="pillbar">
        <div class="pill">HP&nbsp;<span class="big" id="hpCurrentSpan">10</span>/<span class="big"
            id="hpMaxSpan">10</span></div>
        <div class="pill">Ki&nbsp;<span class="big" id="kiCurrentSpan">1</span>/<span class="big"
            id="kiMaxSpan2">1</span></div>
        <div class="pill">AC&nbsp;<span class="big" id="acSpan">10</span></div>
        <div class="pill">Prof&nbsp;<span class="big" id="profSpan">+2</span></div>
      </div>

      <div class="pillbar">
        <div class="pill">Melee Atk&nbsp;<span class="big" id="meleeAtkSpan">+0</span></div>
        <div class="pill">Ranged Atk&nbsp;<span class="big" id="rangedAtkSpan">+0</span></div>
      </div>
      <div class="controls">
        <label>HP Œî <input id="hpDelta" type="number" class="small"></label>
        <button id="btnDamage" class="danger">Take damage</button>
        <button id="btnHeal" class="success">Heal</button>
        <button id="btnHitAtZero">Hit at 0 ‚áí DS fail</button>
        <button id="btnHealFromZero" class="success">Heal from 0</button>
      </div>

      <div class="controls mt8">
        <label>Ki Œî <input id="kiDelta" type="number" class="small"></label>
        <button id="btnSpendKi">Spend Ki</button>
        <button id="btnGainKi" class="success">Gain Ki</button>
      </div>

      <div class="controls mt8">
        <button id="btnDsPlus">Death Save +</button>
        <button id="btnDsMinus" class="danger">Death Save ‚Äì</button>
        <button id="btnCrit" class="success">Crit Success</button>
        <button id="btnCritFail" class="danger">Crit Fail (+2)</button>
        <button id="btnStabilize">Stabilize</button>
      </div>
    </div>
    <div class="tabs">
      <!-- <button data-tab="combat">Combat</button> -->
      <button class="tab-btn" data-tab="stats">Stats</button>
      <button class="tab-btn" data-tab="pcchar">PC Characteristics</button>
      <button class="tab-btn" data-tab="inventory">Inventory</button>
      <button class="tab-btn" data-tab="shenanigans">Shenanigans</button>
      <button class="tab-btn" data-tab="liners">One-Liners</button>
      <button class="tab-btn" data-tab="excuses">Excuses</button>
      <button class="tab-btn" data-tab="familiars">Familiar Names</button>
      <button class="tab-btn" data-tab="skills">Skills</button>
      <button data-tab="sessionNotes">Session Notes</button>
      <button id="btnInstall" class="hidden" title="Install PWA">Install</button>
    </div>

    <div id="deathSavesUI" class="ds-wrap">
      <div class="ds-row">
        <span class="ds-label">Success</span>
        <span class="ds-dot" id="dsS1"></span>
        <span class="ds-dot" id="dsS2"></span>
        <span class="ds-dot" id="dsS3"></span>
      </div>
      <div class="ds-row">
        <span class="ds-label">Fail</span>
        <span class="ds-dot fail" id="dsF1"></span>
        <span class="ds-dot fail" id="dsF2"></span>
        <span class="ds-dot fail" id="dsF3"></span>
      </div>
    </div>

    <!-- –û–≤–µ—Ä–ª–µ–π –ø—Ä–∏ —Å–º—ä—Ä—Ç -->
    <div id="youDiedOverlay" class="you-died hidden">
      <div class="you-died-card">
        <div class="you-died-title">YOU DIED</div>
        <button id="btnResurrect" class="btn success">Resurrect (1 HP)</button>
      </div>
    </div>

    <!-- Stats tab -->
    <div id="tab-stats" class="tab hidden">
      <div class="section-title">Basics</div>
      <div class="row-grid">
        <div class="field"><label>–ò–º–µ</label><input id="charName" type="text" placeholder="–ü–∏–π—Å –û—à–∏—Ç"></div>
      </div>

      <!-- Row 1 -->
      <div class="row-grid">
        <div class="field"><label>XP</label><input id="xpInput" type="number" step="1"></div>
        <div class="field"><label>Level</label><span class="value-pill" id="levelSpan">1</span></div>
        <div class="field"><label>Proficiency</label><span class="value-pill" id="profSpan2">+2</span></div>
        <div class="field"><label>Martial Arts Die</label><span class="value-pill" id="maDieSpan">d4</span></div>
      </div>

      <!-- Row 2 -->
      <div class="row-grid">
        <div class="field"><label>Max HP</label><span class="value-pill" id="maxHpSpan">10</span></div>
        <div class="field"><label>Homebrew HP</label><input type="number" id="homebrewHp" value="0"></div>
        <div class="field"><label>Max Hit Dice</label><span class="value-pill" id="hdMaxSpan">1</span></div>
        <div class="field"><label>Available Hit Dice</label><span class="value-pill" id="hdAvailSpan">1</span></div>
      </div>

      <!-- Row 3 -->
      <div class="row-grid">
        <div class="field"><label>Max Ki</label><span class="value-pill" id="kiMaxSpan">1</span></div>
        <div class="field"><label>AC (Unarmored)</label><span class="value-pill" id="acSpan2">10</span></div>
        <div class="field"><label>Magic Item Bonus (AC)</label><input id="acMagicInput" type="number" step="1"></div>
      </div>

      <!-- Row 4 -->
      <div class="row-grid">
        <div class="field">
          <label>Melee Magic item Atk Bonus</label>
          <input id="meleeMagicInput" type="number" step="1" value="0">
        </div>
        <div class="field">
          <label>Ranged Magic item Atk Bonus</label>
          <input id="rangedMagicInput" type="number" step="1" value="0">
        </div>
      </div>

      <!-- Row 5 -->
      <div class="row-grid">
        <div class="field"><label>Unarmored Movement (+ft)</label><span class="value-pill" id="umBonusSpan">0</span>
        </div>
        <div class="field"><label>Passive Perception</label><span class="value-pill" id="passPercSpan">10</span></div>
        <div class="field"><label>Passive Investigation</label><span class="value-pill" id="passInvSpan">10</span></div>
        <div class="field"><label>Passive Insight</label><span class="value-pill" id="passInsSpan">10</span></div>
      </div>

      <!-- All saves bonus -->
      <div class="row-grid">
        <div class="field" style="max-width:240px"><label>All Saves Bonus</label><input id="saveAllBonusInput"
            type="number" step="1" value="0"></div>
      </div>

      <!-- Abilities -->
      <div class="section-title">Abilities & Saves</div>
      <div class="abilities-grid">
        <!-- STR -->
        <div class="abil">
          <div class="top"><strong>STR</strong><span class="spacer"></span><label class="small-note"><input
                type="checkbox" id="saveStrProf"> Prof</label></div>
          <div class="bottom">
            <input id="strInput" type="number" step="1" class="small">
            <span class="value-pill mod" id="strModSpan">+0</span>
            <span class="value-pill save" id="saveStrTotalSpan">+0</span>
          </div>
        </div>
        <!-- DEX -->
        <div class="abil">
          <div class="top"><strong>DEX</strong><span class="spacer"></span><label class="small-note"><input
                type="checkbox" id="saveDexProf"> Prof</label></div>
          <div class="bottom">
            <input id="dexInput" type="number" step="1" class="small">
            <span class="value-pill mod" id="dexModSpan">+0</span>
            <span class="value-pill save" id="saveDexTotalSpan">+0</span>
          </div>
        </div>
        <!-- CON -->
        <div class="abil">
          <div class="top"><strong>CON</strong><span class="spacer"></span><label class="small-note"><input
                type="checkbox" id="saveConProf"> Prof</label><label class="small-note" style="margin-left:10px"><input
                type="checkbox" id="toughChk"> Tough</label></div>
          <div class="bottom">
            <input id="conInput" type="number" step="1" class="small">
            <span class="value-pill mod" id="conModSpan">+0</span>
            <span class="value-pill save" id="saveConTotalSpan">+0</span>
          </div>
        </div>
        <!-- INT -->
        <div class="abil">
          <div class="top"><strong>INT</strong><span class="spacer"></span><label class="small-note"><input
                type="checkbox" id="saveIntProf"> Prof</label></div>
          <div class="bottom">
            <input id="intInput" type="number" step="1" class="small">
            <span class="value-pill mod" id="intModSpan">+0</span>
            <span class="value-pill save" id="saveIntTotalSpan">+0</span>
          </div>
        </div>
        <!-- WIS -->
        <div class="abil">
          <div class="top"><strong>WIS</strong><span class="spacer"></span><label class="small-note"><input
                type="checkbox" id="saveWisProf"> Prof</label></div>
          <div class="bottom">
            <input id="wisInput" type="number" step="1" class="small">
            <span class="value-pill mod" id="wisModSpan">+0</span>
            <span class="value-pill save" id="saveWisTotalSpan">+0</span>
          </div>
        </div>
        <!-- CHA -->
        <div class="abil">
          <div class="top"><strong>CHA</strong><span class="spacer"></span><label class="small-note"><input
                type="checkbox" id="saveChaProf"> Prof</label></div>
          <div class="bottom">
            <input id="chaInput" type="number" step="1" class="small">
            <span class="value-pill mod" id="chaModSpan">+0</span>
            <span class="value-pill save" id="saveChaTotalSpan">+0</span>
          </div>
        </div>
      </div>

      <div class="section-title">Skills</div>
      <table>
        <thead>
          <tr>
            <th>Skill</th>
            <th>Ability</th>
            <th>Prof</th>
            <th class="right">Bonus</th>
          </tr>
        </thead>
        <tbody id="skillsBody"></tbody>
      </table>

      <div class="section-title">–ë–µ–ª–µ–∂–∫–∏</div>
      <textarea id="notes" rows="4"
        style="width:100%;background:#101323;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:8px"></textarea>
    </div>
    <div id="tab-pcchar" class="tab hidden">
      <div class="section-title">Characteristics</div>

      <!-- –¥–≤—É–∫–æ–ª–æ–Ω–µ–Ω layout –∑–∞ —à–∏—Ä–æ–∫ –µ–∫—Ä–∞–Ω -->
      <div class="pcchar-grid">
        <section>
          <div class="section-title">Languages</div>
          <div class="controls" style="justify-content:flex-start;margin-bottom:10px">
            <button id="btnLangAdd" class="primary">+ Add language</button>
          </div>
          <div id="langTableRoot"></div>
        </section>

        <section>
          <div class="section-title">Tools</div>
          <div class="controls" style="justify-content:flex-start;margin-bottom:10px">
            <button id="btnToolAdd" class="primary">+ Add tool</button>
          </div>
          <div id="toolTableRoot"></div>
        </section>
      </div>

      <div class="section-title" style="margin-top:14px">Personality</div>
      <textarea id="pcPersonality" rows="4"
        style="width:100%;background:#101323;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:8px"></textarea>

      <div class="section-title">Bond</div>
      <textarea id="pcBond" rows="4"
        style="width:100%;background:#101323;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:8px"></textarea>

      <div class="section-title">Flaw</div>
      <textarea id="pcFlaw" rows="4"
        style="width:100%;background:#101323;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:8px"></textarea>

      <!-- —Å–ø–æ–¥–µ–ª–µ–Ω –º–æ–¥–∞–ª (–∏–∑–ø–æ–ª–∑–≤–∞ —Å—Ç–∏–ª–∞ –Ω–∞ alias/inventory) -->
      <div id="pcModal" class="modal hidden">
        <div class="modal__card">
          <div class="modal__title" id="pcModalTitle">Add</div>
          <div class="field" style="margin-top:8px">
            <label id="pcModalLabel">Name</label>
            <input id="pcModalName" type="text" placeholder="Abyssal / Brewer's Supplies...">
          </div>
          <div class="modal__actions">
            <button id="pcModalCancel">–û—Ç–∫–∞–∑</button>
            <button id="pcModalSave" class="primary">–ó–∞–ø–∞–∑–∏</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Inventory tab -->
    <div id="tab-inventory" class="tab hidden">
      <div class="section-title">Inventory</div>

      <div class="controls" style="justify-content:center;margin-bottom:10px">
        <button id="btnInvAdd" class="primary">+ Add item</button>
      </div>

      <div id="invTableRoot"></div>

      <!-- Modal –∑–∞ Add/Edit (–ø–æ–ª–∑–≤–∞–º–µ —Å—Ç–∏–ª–∞ –Ω–∞ modal) -->
      <div id="invModal" class="modal hidden">
        <div class="modal__card">
          <div class="modal__title" id="invModalTitle">Add item</div>

          <div class="row-grid" style="margin-top:8px">
            <div class="field">
              <label>–ò–º–µ</label>
              <input id="invName" type="text" placeholder="Dart / Rope / Potion..." />
            </div>
            <div class="field">
              <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
              <input id="invQty" type="number" step="1" min="0" value="1" />
            </div>
          </div>

          <div class="field" style="margin-top:8px">
            <label>–ë–µ–ª–µ–∂–∫–∞</label>
            <textarea id="invNote" rows="4"
              style="width:100%;background:#101323;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:8px"></textarea>
          </div>

          <div class="modal__actions">
            <button id="invCancel">–û—Ç–∫–∞–∑</button>
            <button id="invSave" class="primary">–ó–∞–ø–∞–∑–∏</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Shenanigans tab -->
    <div id="tab-shenanigans" class="tab hidden">
      <div class="section-title">Shenanigans</div>

      <!-- —Ä–µ–¥—ä—Ç —Å –ø–æ–ª–µ + –±—É—Ç–æ–Ω–∏ -->
      <div class="one-liner-box" style="margin-bottom: 12px;">
        <input id="fakeNameOutput" type="text" readonly placeholder="(click Get Name)">
        <button id="btnGetName">Get Name</button>
        <button id="btnSaveAlias" disabled>Save</button> <!-- –Ω–æ–≤ -->
      </div>

      <!-- —Ç–∞–±–ª–∏—Ü–∞ —Å –∞–ª–∏–∞—Å–∏ -->
      <div id="aliasLog"></div>

      <!-- –º–æ–¥–∞–ª–µ–Ω –¥–∏–∞–ª–æ–≥ -->
      <div id="aliasModal" class="modal hidden">
        <div class="modal__card">
          <div class="modal__title">–ù–∞ –∫–æ–≥–æ —Å–∏ —Å–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–ª —Ç–∞–∫–∞?</div>
          <textarea id="aliasToInput" rows="5" placeholder="–ò–º–µ/–æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —á–æ–≤–µ–∫–∞, —Å–∏—Ç—É–∞—Ü–∏—è, –±–µ–ª–µ–∂–∫–∏..."></textarea>
          <div class="modal__actions">
            <button id="aliasCancel">–û—Ç–∫–∞–∑</button>
            <button id="aliasConfirm">–ó–∞–ø–∞–∑–∏</button>
          </div>
        </div>
      </div>
    </div>

    <!-- One-Liners tab -->
    <div id="tab-liners" class="tab hidden">
      <div class="section-title">One-Liners</div>

      <div class="row-grid">
        <!-- Crit Miss -->
        <div class="field">
          <label class="one-liner-header">Critical Miss</label>
          <div class="one-liner-box">

            <textarea id="olCritMiss" rows="10" readonly></textarea>
            <button id="btnCritMiss">Get</button>
          </div>
        </div>

        <!-- Miss attack -->
        <div class="field">
          <label class="one-liner-header">Miss attack</label>
          <div class="one-liner-box">

            <textarea id="olMissAttack" rows="10" readonly></textarea>
            <button id="btnMissAttack">Get</button>
          </div>
        </div>

        <!-- Crit Attack -->
        <div class="field">
          <label class="one-liner-header">Critical Attack</label>
          <div class="one-liner-box">
            <textarea id="olCritAttack" rows="10" readonly></textarea>
            <button id="btnCritAttack">Get</button>
          </div>
        </div>

        <!-- Suffer Critical Hit -->
        <div class="field">
          <label class="one-liner-header">Suffer Critical Hit</label>
          <div class="one-liner-box">
            <textarea id="olSufferCrit" rows="10" readonly></textarea>
            <button id="btnSufferCrit">Get</button>
          </div>
        </div>

        <!-- Combat Tease -->
        <div class="field">
          <label class="one-liner-header">Combat Tease</label>
          <div class="one-liner-box">
            <textarea id="olTease" rows="10" readonly></textarea>
            <button id="btnTease">Get</button>
          </div>
        </div>

        <!-- Magic -->
        <div class="field">
          <label class="one-liner-header">Magic</label>
          <div class="one-liner-box">
            <textarea id="olMagic" rows="10" readonly></textarea>
            <button id="btnMagic">Get</button>
          </div>
        </div>

        <!-- Q&A -->
        <div class="field">
          <label class="one-liner-header">Q&A</label>
          <div class="one-liner-box">
            <textarea id="olQA" rows="10" readonly></textarea>
            <button id="btnQA">Get</button>
          </div>
        </div>

        <!-- Social -->
        <div class="field">
          <label class="one-liner-header">Social</label>
          <div class="one-liner-box">
            <textarea id="olSocial" rows="10" readonly></textarea>
            <button id="btnSocial">Get</button>
          </div>
        </div>

        <!-- Coctail magic -->
        <div class="field">
          <label class="one-liner-header">Coctail magic</label>
          <div class="one-liner-box">
            <textarea id="olCoctailMagic" rows="10" readonly></textarea>
            <button id="btnCoctailMagic">Get</button>
          </div>
        </div>
      </div>

      <small>–ß–µ—Ç–µ –æ—Ç <code>one-liners.json</code>.</small>
    </div>

    <!-- Excuses tab -->
    <div id="tab-excuses" class="tab hidden">
      <div class="section-title">Excuses</div>

      <div class="row-grid">
        <!-- Life wisdom -->
        <div class="field">
          <label class="one-liner-header">Life wisdom</label>
          <div class="one-liner-box">
            <textarea id="exLifeWisdom" rows="10" readonly></textarea>
            <button id="btnExLifeWisdom">Get</button>
          </div>
        </div>

        <!-- Game cheating -->
        <div class="field">
          <label class="one-liner-header">Game cheating</label>
          <div class="one-liner-box">
            <textarea id="exGameCheating" rows="10" readonly></textarea>
            <button id="btnExGameCheating">Get</button>
          </div>
        </div>

        <!-- Excuses -->
        <div class="field">
          <label class="one-liner-header">Excuses</label>
          <div class="one-liner-box">
            <textarea id="exExcuses" rows="10" readonly></textarea>
            <button id="btnExExcuses">Get</button>
          </div>
        </div>

        <!-- Storytime -->
        <div class="field">
          <label class="one-liner-header">Storytime</label>
          <div class="one-liner-box">
            <textarea id="exStorytime" rows="10" readonly></textarea>
            <button id="btnExStorytime">Get</button>
          </div>
        </div>

        <!-- Slip away -->
        <div class="field">
          <label class="one-liner-header">Slip away</label>
          <div class="one-liner-box">
            <textarea id="exSlipaway" rows="10" readonly></textarea>
            <button id="btnExSlipaway">Get</button>
          </div>
        </div>
      </div>

      <small>–ß–µ—Ç–µ –æ—Ç <code>excuses.json</code>.</small>
    </div>

    <!-- Familiar Names tab -->
    <div id="tab-familiars" class="tab hidden">
      <div class="section-title">Familiar Names</div>

      <!-- —Ä–µ–¥: –ø–æ–ª–µ + –±—É—Ç–æ–Ω–∏ -->
      <div class="one-liner-box" style="margin-bottom: 12px;">
        <input id="famNameOutput" type="text" readonly placeholder="(click a group to roll a name)">
        <button id="btnFamSave" disabled>Save</button>
      </div>

      <!-- –≥—Ä—É–ø–æ–≤–∏ –±—É—Ç–æ–Ω–∏ -->
      <div class="fam-groups">
        <button class="fam-btn" data-famcat="feline">Feline</button>
        <button class="fam-btn" data-famcat="canine">Canine</button>
        <button class="fam-btn" data-famcat="avian">Avian</button>
        <button class="fam-btn" data-famcat="rodentia">Rodentia</button>
        <button class="fam-btn" data-famcat="creepycrawlies">Creepycrawlies</button>
        <button class="fam-btn" data-famcat="aquatic">Aquatic</button>
        <button class="fam-btn" data-famcat="arcane">Arcane</button>
      </div>

      <!-- —Ç–∞–±–ª–∏—Ü–∞ -->
      <div id="famLog" class="mt8"></div>

      <!-- –º–æ–¥–∞–ª–µ–Ω –¥–∏–∞–ª–æ–≥ –∑–∞ –±–µ–ª–µ–∂–∫–∞ -->
      <div id="famModal" class="modal hidden">
        <div class="modal__card">
          <div class="modal__title">–ù–∞ –∫–æ–≥–æ/–∫–∞–∫–≤–æ –µ —Ç–æ–≤–∞ –∏–º–µ?</div>
          <textarea id="famNoteInput" rows="5"
            placeholder="–Ω–∞–ø—Ä. ‚Äû—è—Å—Ç—Ä–µ–±—ä—Ç –Ω–∞ –ú–∞–π–æ—Ä–∞‚Äú, '–ø–∞—è–∫ –≤ —à–∞–ø–∫–∞—Ç–∞', '–≤—ä–ª–∫—ä—Ç –Ω–∞ –¥—Ä—É–∏–¥–∞'‚Ä¶"></textarea>
          <div class="modal__actions">
            <button id="famCancel">–û—Ç–∫–∞–∑</button>
            <button id="famConfirm">–ó–∞–ø–∞–∑–∏</button>
          </div>
        </div>
      </div>
    </div>

    <div id="tab-skills" class="tab hidden">
      <div class="section-title">
        Class Features (up to your level)
        <button id="collapseAllBtn" class="btn-collapse">Collapse all</button>
      </div>
      <div id="featuresAccordion" class="acc-root"></div>
    </div>

    <div id="tab-sessionNotes" class="tab hidden">
      <h2>Session Notes</h2>

      <div style="display:flex;gap:.5rem;align-items:center;margin-bottom:.5rem;">
        <button id="btnNotesLink" type="button">Link notes folder‚Ä¶</button>
        <small id="notesStatus">Notes: not linked</small>
      </div>

      <textarea id="notesInput" rows="12" class="notes-box"></textarea>

      <h3>üìÇ –ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ —Å—Ç–∞—Ä–∏ –∑–∞–ø–∏—Å–∫–∏</h3>
      <input type="file" id="importNotesFile" accept="application/json,.json">
      <textarea id="notesPreview" rows="12" class="notes-box" readonly></textarea>
    </div>
  </div>


  <script src="app.js"></script>
</body>

</html>